<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analyze | CareerSafe</title>
    <link rel="preconnect" href="https://cdn.tailwindcss.com" crossorigin>
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
    <script src="https://cdn.tailwindcss.com" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <link rel="stylesheet" href="../assets/animations.css">

    <style>
        .hero-gradient {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #1e3a8a 100%);
        }
        
        body {
            margin: 0;
            font-family: system-ui, -apple-system, sans-serif;
        }
        
        .glass {
            background: rgba(255, 255, 255, 0.12);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .fade-up {
            animation: fadeUp 0.8s ease forwards;
            opacity: 0;
        }
        
        @keyframes fadeUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .risk-high {
            color: #ef4444;
        }
        
        .risk-medium {
            color: #f59e0b;
        }
        
        .risk-low {
            color: #10b981;
        }
        
        .tab-button {
            position: relative;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border: 2px solid transparent;
        }
        
        .tab-button.active {
            color: white;
            border-color: rgba(255, 255, 255, 0.3);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            transform: translateY(-2px);
        }
        
        #tab-job-risk.active {
            background: linear-gradient(135deg, #1e40af 0%, #3b82f6 50%, #60a5fa 100%);
            box-shadow: 0 10px 25px rgba(59, 130, 246, 0.4);
        }
        
        #tab-company.active {
            background: linear-gradient(135deg, #059669 0%, #10b981 50%, #34d399 100%);
            box-shadow: 0 10px 25px rgba(16, 185, 129, 0.4);
        }
        
        #tab-career.active {
            background: linear-gradient(135deg, #7c3aed 0%, #8b5cf6 50%, #a78bfa 100%);
            box-shadow: 0 10px 25px rgba(139, 92, 246, 0.4);
        }
        
        .tab-button:not(.active) {
            background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%);
            color: #374151;
        }
        
        .tab-button:not(.active):hover {
            background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
            border-color: #93c5fd;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }
        
        .tab-icon {
            filter: drop-shadow(0 4px 6px rgba(0, 0, 0, 0.1));
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        .tab-button.active .tab-icon {
            filter: drop-shadow(0 6px 12px rgba(255, 255, 255, 0.3));
        }
        
        @keyframes bounceIn {
            0% {
                transform: scale(0.3) rotate(-180deg);
                opacity: 0;
            }
            50% {
                transform: scale(1.1) rotate(10deg);
            }
            70% {
                transform: scale(0.9) rotate(-5deg);
            }
            100% {
                transform: scale(1) rotate(0deg);
                opacity: 1;
            }
        }
        
        @keyframes shimmer {
            0% {
                transform: translateX(-100%);
            }
            100% {
                transform: translateX(100%);
            }
        }
        
        .tab-button.active::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(45deg, transparent 30%, rgba(255, 255, 255, 0.1) 50%, transparent 70%);
            animation: shimmer 2s infinite;
        }
        /* Spinner for loading buttons */
        
        .spinner {
            width: 20px;
            height: 20px;
            border: 2px solid transparent;
            border-top: 2px solid currentColor;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            display: inline-block;
        }
        
        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }
        /* Page loader */
        
        #pageLoader {
            position: fixed;
            inset: 0;
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity 0.3s ease;
        }
        
        #pageLoader.hidden {
            opacity: 0;
            pointer-events: none;
        }
        
        .loader-spinner {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top: 4px solid #06b6d4;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
    </style>
</head>

<body class="bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 text-white min-h-screen">
    <div id="pageLoader">
        <div class="loader-spinner"></div>
    </div>

    <div id="errorBanner" style="display:none;position:fixed;top:80px;left:50%;transform:translateX(-50%);z-index:10000;background:#ff4444;color:white;padding:12px 16px;border-radius:8px;max-width:90%;box-shadow:0 8px 24px rgba(0,0,0,0.3);font-weight:600;">
        <span id="errorBannerMsg">JavaScript error occurred</span>
        <div id="errorBannerDetails" style="font-weight:400;margin-top:6px;font-size:13px;opacity:0.95;white-space:pre-wrap;max-height:200px;overflow:auto;"></div>
    </div>

    <!-- Navigation -->
    <nav class="bg-blue-900/80 backdrop-blur-md border-b border-blue-700 sticky top-0 z-50">
        <div class="container mx-auto px-4 sm:px-6 lg:px-10 py-4">
            <div class="flex justify-between items-center">
                <h1 class="text-2xl sm:text-3xl font-bold text-cyan-400 flex items-center gap-2">
                    <span>üõ°Ô∏è</span><span>CareerSafe</span>
                </h1>
                <div class="flex flex-wrap gap-4 sm:gap-6 text-sm sm:text-base">
                    <a href="index.html" class="hover:text-cyan-300 transition">Home</a>
                    <a href="features.html" class="hover:text-cyan-300 transition">Features</a>
                    <a href="analyze.html" class="text-cyan-400 font-semibold hover:text-cyan-300 transition">Analyze</a>
                    <a href="resume.html" class="hover:text-cyan-300 transition">Resume Check</a>
                    <a href="login.html" class="bg-cyan-400 text-slate-900 px-4 py-2 rounded-lg font-semibold hover:bg-cyan-300 transition" id="loginBtn">Login</a>
                    <a href="dashboard.html" class="bg-purple-500 text-white px-4 py-2 rounded-lg font-semibold hover:bg-purple-600 transition hidden" id="dashboardBtn">Dashboard</a>
                </div>
            </div>
        </div>
    </nav>

    <div class="container mx-auto px-4 sm:px-6 lg:px-10 py-8 sm:py-12 max-w-6xl">
        <!-- Tab Navigation -->
        <div class="glass shadow-xl rounded-2xl p-4 mb-6 fade-up">
            <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
                <button onclick="switchTab('job-risk')" id="tab-job-risk" class="tab-button active group relative overflow-hidden bg-gradient-to-br from-blue-600 to-blue-800 text-white p-6 rounded-xl transition-all duration-300 transform hover:scale-105 hover:shadow-2xl">
                    <div class="absolute inset-0 bg-gradient-to-br from-blue-400/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                    <div class="relative z-10 flex flex-col items-center gap-3">
                        <div class="tab-icon text-5xl transform transition-all duration-300 group-hover:scale-110 group-hover:rotate-12">üîç</div>
                        <div class="text-center">
                            <h3 class="font-bold text-lg mb-1">Job Risk Analysis</h3>
                            <p class="text-xs text-blue-100 opacity-90">Detect job scams</p>
                        </div>
                        <div class="absolute top-2 right-2 w-3 h-3 bg-green-400 rounded-full animate-pulse"></div>
                    </div>
                    <div class="absolute bottom-0 left-0 right-0 h-1 bg-white/30 transform scale-x-0 group-hover:scale-x-100 transition-transform duration-300"></div>
                </button>

                <button onclick="switchTab('company')" id="tab-company" class="tab-button group relative overflow-hidden bg-gradient-to-br from-gray-100 to-gray-200 text-gray-700 p-6 rounded-xl transition-all duration-300 transform hover:scale-105 hover:shadow-2xl">
                    <div class="absolute inset-0 bg-gradient-to-br from-green-400/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                    <div class="relative z-10 flex flex-col items-center gap-3">
                        <div class="tab-icon text-5xl transform transition-all duration-300 group-hover:scale-110 group-hover:rotate-12">üè¢</div>
                        <div class="text-center">
                            <h3 class="font-bold text-lg mb-1">Company Verification</h3>
                            <p class="text-xs text-gray-600 opacity-90">Verify legitimacy</p>
                        </div>
                    </div>
                </button>

                <button onclick="switchTab('career')" id="tab-career" class="tab-button group relative overflow-hidden bg-gradient-to-br from-gray-100 to-gray-200 text-gray-700 p-6 rounded-xl transition-all duration-300 transform hover:scale-105 hover:shadow-2xl">
                    <div class="absolute inset-0 bg-gradient-to-br from-purple-400/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                    <div class="relative z-10 flex flex-col items-center gap-3">
                        <div class="tab-icon text-5xl transform transition-all duration-300 group-hover:scale-110 group-hover:rotate-12">ü§ñ</div>
                        <div class="text-center">
                            <h3 class="font-bold text-lg mb-1">AI Career Guidance</h3>
                            <p class="text-xs text-gray-600 opacity-90">Get recommendations</p>
                        </div>
                    </div>
                </button>
            </div>
        </div>

        <!-- Tabs Content -->
        <div id="content-job-risk" class="tab-content">
            <section class="glass shadow-xl rounded-2xl p-6 sm:p-10 fade-up">
                <h2 class="text-2xl sm:text-3xl font-bold text-cyan-400 mb-6 flex items-center gap-3"><span>üîç</span> Job Risk Analysis</h2>
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-300 mb-2">Paste job offer, message, or company info</label>
                    <textarea id="inputText" class="w-full border-2 border-white/20 bg-white/10 text-white p-4 rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-400 focus:border-transparent resize-y min-h-[150px] placeholder-gray-400" placeholder="Example: URGENT! Work from home opportunity..."></textarea>
                    <div class="mt-3">
                        <p class="text-xs font-semibold text-gray-300 mb-2">‚ö° Quick Test Cases:</p>
                        <div class="flex flex-wrap gap-2">
                            <button onclick="loadAndAnalyze(0)" class="text-xs bg-red-500/20 hover:bg-red-500/30 text-red-300 px-4 py-2 rounded-lg transition font-medium shadow-sm hover:shadow-md transform hover:scale-105 border border-red-500/30">üî¥ High Risk Scam</button>
                            <button onclick="loadAndAnalyze(1)" class="text-xs bg-green-500/20 hover:bg-green-500/30 text-green-300 px-4 py-2 rounded-lg transition font-medium shadow-sm hover:shadow-md transform hover:scale-105 border border-green-500/30">‚úÖ Legitimate Job</button>
                            <button onclick="loadAndAnalyze(2)" class="text-xs bg-yellow-500/20 hover:bg-yellow-500/30 text-yellow-300 px-4 py-2 rounded-lg transition font-medium shadow-sm hover:shadow-md transform hover:scale-105 border border-yellow-500/30">‚ö†Ô∏è Suspicious</button>
                            <button onclick="loadAndAnalyze(3)" class="text-xs bg-red-500/20 hover:bg-red-500/30 text-red-300 px-4 py-2 rounded-lg transition font-medium shadow-sm hover:shadow-md transform hover:scale-105 border border-red-500/30">üö® Phishing Attempt</button>
                            <button onclick="loadAndAnalyze(4)" class="text-xs bg-green-500/20 hover:bg-green-500/30 text-green-300 px-4 py-2 rounded-lg transition font-medium shadow-sm hover:shadow-md transform hover:scale-105 border border-green-500/30">üíº Remote Job</button>
                            <button onclick="loadAndAnalyze(5)" class="text-xs bg-red-500/20 hover:bg-red-500/30 text-red-300 px-4 py-2 rounded-lg transition font-medium shadow-sm hover:shadow-md transform hover:scale-105 border border-red-500/30">üí∞ Get Rich Quick</button>
                        </div>
                    </div>
                </div>
                <button onclick="analyzeRisk()" class="w-full bg-gradient-to-r from-blue-900 to-blue-700 text-white py-4 rounded-lg font-bold text-lg hover:from-blue-800 hover:to-blue-600 transition transform hover:scale-105 shadow-lg" id="analyzeBtn">Analyze Risk</button>
                <div id="result" class="hidden mt-8 fade-up">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                        <div class="bg-white/5 p-6 rounded-xl"><canvas id="riskChart" height="200"></canvas></div>
                        <div id="riskText" class="space-y-4"></div>
                    </div>
                </div>
            </section>
        </div>

        <div id="content-company" class="tab-content hidden">
            <section class="glass shadow-xl rounded-2xl p-6 sm:p-10 fade-up">
                <h2 class="text-2xl sm:text-3xl font-bold text-green-400 mb-6 flex items-center gap-3"><span>üè¢</span> Company Verification</h2>
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-300 mb-2">Enter company name</label>
                    <input id="companyName" type="text" class="w-full border-2 border-white/20 bg-white/10 text-white p-4 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-400 focus:border-transparent placeholder-gray-400" placeholder="e.g., Google, Microsoft...">
                </div>
                <button onclick="verifyCompany()" class="w-full bg-gradient-to-r from-green-900 to-green-700 text-white py-4 rounded-lg font-bold text-lg hover:from-green-800 hover:to-green-600 transition transform hover:scale-105 shadow-lg">Verify Company</button>
                <div id="companyResult" class="hidden mt-8 fade-up">
                    <div id="companyText" class="space-y-4"></div>
                </div>
            </section>
        </div>

        <div id="content-career" class="tab-content hidden">
            <section class="glass shadow-xl rounded-2xl p-6 sm:p-10 fade-up">
                <h2 class="text-2xl sm:text-3xl font-bold text-purple-400 mb-6 flex items-center gap-3"><span>ü§ñ</span> AI Career Guidance</h2>
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-300 mb-2">Enter your skill</label>
                    <input id="skillInput" type="text" class="w-full border-2 border-white/20 bg-white/10 text-white p-4 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent placeholder-gray-400" placeholder="e.g., Python, React, Design...">
                </div>
                <button onclick="getCareerGuidance()" class="w-full bg-gradient-to-r from-purple-900 to-purple-700 text-white py-4 rounded-lg font-bold text-lg hover:from-purple-800 hover:to-purple-600 transition transform hover:scale-105 shadow-lg">Get Guidance</button>
                <div id="careerResult" class="hidden mt-8 fade-up">
                    <div id="careerText" class="space-y-4"></div>
                </div>
            </section>
        </div>
    </div>

    <script>
        const API_BASE = 'http://127.0.0.1:5000';
        let chart = null;
        let analysisHistory = [];

        try {
            analysisHistory = JSON.parse(localStorage.getItem('careersafe_history') || '[]');
        } catch (e) {
            console.warn('History load error', e);
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function switchTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(function(c) {
                c.style.opacity = '0';
                setTimeout(function() {
                    c.classList.add('hidden');
                }, 200);
            });

            document.querySelectorAll('.tab-button').forEach(function(b) {
                b.classList.remove('active');
                b.style.background = '';
                b.classList.add('bg-gradient-to-br', 'from-gray-100', 'to-gray-200');
                b.classList.remove('text-white');
                b.classList.add('text-gray-700');
            });

            setTimeout(function() {
                const content = document.getElementById('content-' + tabName);
                if (content) {
                    content.classList.remove('hidden');
                    content.style.opacity = '1';
                }
                const btn = document.getElementById('tab-' + tabName);
                if (btn) {
                    btn.classList.add('active');
                    btn.classList.remove('bg-gradient-to-br', 'from-gray-100', 'to-gray-200', 'text-gray-700');
                    btn.classList.add('text-white');
                }
            }, 200);
        }

        function analyzeRisk() {
            const text = document.getElementById('inputText').value;
            if (!text.trim()) {
                alert('Please enter job offer text');
                return;
            }

            const btn = document.getElementById('analyzeBtn');
            const originalText = btn.textContent;
            btn.disabled = true;
            btn.innerHTML = '<span class="spinner"></span> Analyzing...';

            fetch(API_BASE + '/analyze', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        text: text
                    })
                })
                .then(function(r) {
                    if (!r.ok) throw new Error('HTTP ' + r.status);
                    return r.json();
                })
                .then(function(data) {
                    displayResults(data);
                    analysisHistory.unshift({
                        text: text,
                        result: data,
                        time: new Date().toISOString()
                    });
                    localStorage.setItem('careersafe_history', JSON.stringify(analysisHistory.slice(0, 50)));
                })
                .catch(function(e) {
                    console.error('Analysis error:', e);
                    alert('Error: ' + e.message + '. Make sure the backend server is running.');
                })
                .finally(function() {
                    btn.disabled = false;
                    btn.textContent = originalText;
                });
        }

        function displayResults(data) {
            const result = document.getElementById('result');
            const riskText = document.getElementById('riskText');

            const risk = data.risk_percentage || 0;
            const level = data.risk_level || 'Unknown';
            const reasons = data.reasons || [];
            const tips = data.safety_tips || [];

            const riskClass = level.toLowerCase();
            riskText.innerHTML = '<div><h3 class="text-2xl font-bold mb-4">Risk Assessment</h3><div class="text-6xl font-bold mb-2"><span class="risk-' + riskClass + '">' + risk + '%</span></div><p class="text-lg mb-4 text-gray-300">Risk Level: <span class="font-bold risk-' + riskClass + '">' + level + '</span></p><div class="space-y-2"><h4 class="font-bold text-gray-300">Reasons:</h4>' + reasons.map(function(r) {
                return '<div class="text-sm text-gray-400">‚Ä¢ ' + escapeHtml(r) + '</div>';
            }).join('') + '</div><div class="space-y-2 mt-4"><h4 class="font-bold text-gray-300">Safety Tips:</h4>' + tips.map(function(t) {
                return '<div class="text-sm text-gray-400">‚úì ' + escapeHtml(t) + '</div>';
            }).join('') + '</div></div>';

            if (chart) chart.destroy();
            const ctx = document.getElementById('riskChart').getContext('2d');
            const colors = risk < 30 ? '#10b981' : risk < 70 ? '#f59e0b' : '#ef4444';
            chart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Risk', 'Safe'],
                    datasets: [{
                        data: [risk, 100 - risk],
                        backgroundColor: [colors, '#1f2937'],
                        borderColor: ['#1f2937', '#1f2937'],
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            labels: {
                                color: '#e5e7eb'
                            },
                            position: 'bottom'
                        }
                    }
                }
            });

            result.classList.remove('hidden');
        }

        function verifyCompany() {
            const companyName = document.getElementById('companyName').value;
            if (!companyName.trim()) {
                alert('Please enter a company name');
                return;
            }

            fetch(API_BASE + '/verify-company', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        company_name: companyName
                    })
                })
                .then(function(r) {
                    return r.json();
                })
                .then(function(data) {
                    const result = document.getElementById('companyResult');
                    const text = document.getElementById('companyText');
                    const verified = data.verified ? '‚úì Verified' : '‚ö†Ô∏è Unverified';
                    text.innerHTML = '<div><h3 class="text-2xl font-bold mb-4">Verification Result</h3><p class="text-xl mb-2">' + data.company_name + ' - ' + verified + '</p><p class="text-lg font-bold text-' + (data.verified ? 'green' : 'yellow') + '-400 mb-4">Risk: ' + data.risk_percentage + '%</p><p class="text-gray-300 mb-4">' + data.recommendation + '</p><div class="grid grid-cols-2 gap-2 text-sm"><div>Registered: ' + (data.details.registered ? '‚úì' : '‚úó') + '</div><div>Domain Exists: ' + (data.details.domain_exists ? '‚úì' : '‚úó') + '</div><div>LinkedIn: ' + (data.details.linkedin_presence ? '‚úì' : '‚úó') + '</div><div>Reviews: ' + (data.details.reviews_available ? '‚úì' : '‚úó') + '</div></div></div>';
                    result.classList.remove('hidden');
                })
                .catch(function(e) {
                    alert('Error: ' + e.message);
                });
        }

        function getCareerGuidance() {
            const skill = document.getElementById('skillInput').value;
            if (!skill.trim()) {
                alert('Please enter a skill');
                return;
            }

            fetch(API_BASE + '/career-guidance', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        skill: skill
                    })
                })
                .then(function(r) {
                    return r.json();
                })
                .then(function(data) {
                    const result = document.getElementById('careerResult');
                    const text = document.getElementById('careerText');
                    let html = '<div><h3 class="text-2xl font-bold mb-4">Career Paths for ' + escapeHtml(data.skill_searched) + '</h3>';
                    if (data.careers && data.careers.length > 0) {
                        html += '<div class="grid grid-cols-1 md:grid-cols-2 gap-4">';
                        data.careers.forEach(function(career) {
                            html += '<div class="bg-white/5 p-4 rounded-lg"><h4 class="font-bold text-cyan-400 mb-2">' + escapeHtml(career.title) + '</h4><p class="text-sm mb-2"><strong>Salary:</strong> ' + escapeHtml(career.salary) + '</p><p class="text-sm mb-2"><strong>Growth:</strong> ' + escapeHtml(career.growth) + '</p><p class="text-xs text-gray-400">Skills: ' + (career.skills ? career.skills.join(', ') : 'N/A') + '</p></div>';
                        });
                        html += '</div>';
                    } else {
                        html += '<p>No careers found for this skill.</p>';
                    }
                    html += '</div>';
                    text.innerHTML = html;
                    result.classList.remove('hidden');
                })
                .catch(function(e) {
                    alert('Error: ' + e.message);
                });
        }

        function loadAndAnalyze(index) {
            const testData = [
                'URGENT! Work from home opportunity. Send $500 registration fee to secure your position. High salary guaranteed!',
                'We are looking for a Software Engineer at Google. Please apply through our official careers page at careers.google.com',
                'Congratulations! You have been selected. Please provide your bank details and SSN for verification.',
                'Click here to claim your job opportunity. Send PayPal payment to activate account. Bitcoin accepted.',
                'Remote Data Entry Work - $25/hour, flexible hours, no experience needed. Apply now at official website.',
                'GET RICH QUICK! Make $5000 a week from home! Limited spots available, act NOW!!!'
            ];
            if (testData[index]) {
                document.getElementById('inputText').value = testData[index];
                analyzeRisk();
            }
        }

        window.addEventListener('load', function() {
            const loader = document.getElementById('pageLoader');
            if (loader) {
                setTimeout(function() {
                    loader.classList.add('hidden');
                }, 500);
            }
        });

        document.getElementById('inputText').addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.key === 'Enter') {
                analyzeRisk();
            }
        });
    </script>
</body>

</html>