<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login | CareerSafe</title>
    <!-- Preconnect to CDN for faster loading -->
    <link rel="preconnect" href="https://cdn.tailwindcss.com" crossorigin>
    <link rel="dns-prefetch" href="https://cdn.tailwindcss.com">
    <!-- Load Tailwind CSS asynchronously -->
    <script src="https://cdn.tailwindcss.com" defer></script>
    <!-- Load CSS first for faster rendering -->
    <link rel="stylesheet" href="../assets/animations.css">
    <!-- Inline critical CSS for instant rendering -->
    <style>
        .hero-gradient {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #1e3a8a 100%);
        }
        /* Critical styles for initial render */
        body { margin: 0; font-family: system-ui, -apple-system, sans-serif; }
        .glass { background: rgba(255, 255, 255, 0.12); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.2); }
        .fade-up { animation: fadeUp 0.8s ease forwards; opacity: 0; }
        @keyframes fadeUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
    </style>
    <!-- Load effects.js asynchronously -->
    <script src="../assets/effects.js" defer></script>
    <!-- Loading indicator -->
    <style>
        #pageLoader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity 0.3s ease;
        }
        #pageLoader.hidden {
            opacity: 0;
            pointer-events: none;
        }
        .loader-spinner {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top: 4px solid #06b6d4;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
    </style>
</head>

<body class="bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 text-white min-h-screen flex items-center justify-center p-4">
    <!-- Loading indicator -->
    <div id="pageLoader">
        <div class="loader-spinner"></div>
    </div>
    <div class="glass p-8 sm:p-12 rounded-2xl w-full max-w-md fade-up text-white shadow-2xl">
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold mb-2 text-cyan-400">üõ°Ô∏è CareerSafe</h1>
            <h2 class="text-2xl font-semibold mb-2">Welcome Back</h2>
            <p class="text-gray-300 text-sm">Sign in to access your dashboard</p>
        </div>

        <form id="loginForm" onsubmit="handleLogin(event)">
            <div class="mb-4">
                <label class="block text-sm font-medium mb-2">Email</label>
                <input 
                    type="email" 
                    id="email"
                    class="w-full p-3 rounded-lg bg-white/10 border border-white/20 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-cyan-400 transition"
                    placeholder="your.email@example.com"
                    required
                >
            </div>

            <div class="mb-6">
                <label class="block text-sm font-medium mb-2">Password</label>
                <input 
                    type="password" 
                    id="password"
                    class="w-full p-3 rounded-lg bg-white/10 border border-white/20 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-cyan-400 transition"
                    placeholder="Enter your password"
                    required
                >
            </div>

            <button 
                type="submit"
                class="w-full bg-cyan-400 text-slate-900 py-3 rounded-lg font-bold text-lg hover:bg-cyan-300 transition transform hover:scale-105 mb-4"
                id="loginButton"
            >
                Sign In
            </button>

            <div class="text-center">
                <p class="text-sm text-gray-400 mb-2">Demo Mode: Use any credentials</p>
                <button 
                    type="button"
                    onclick="quickLogin()"
                    class="text-cyan-400 hover:text-cyan-300 text-sm underline"
                >
                    Quick Login (Demo)
                </button>
            </div>
        </form>

        <div class="mt-6 pt-6 border-t border-white/20">
            <p class="text-center text-xs text-gray-400">
                üîí Secure AI-Powered Career Safety Platform
            </p>
        </div>
    </div>

    <script>
        // Check if already logged in
        if (localStorage.getItem('careersafe_user')) {
            window.location.href = 'index.html';
        }

        function quickLogin() {
            document.getElementById('email').value = 'demo@careersafe.com';
            document.getElementById('password').value = 'demo123';
            handleLogin(new Event('submit'));
        }

        async function handleLogin(event) {
            event.preventDefault();
            
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const loginButton = document.getElementById('loginButton');
            
            // Show loading
            loginButton.disabled = true;
            loginButton.innerHTML = '<div class="spinner mx-auto"></div>';
            
            // Simulate API call (in real app, this would call backend)
            await new Promise(resolve => setTimeout(resolve, 1000));
            
            // Store user session
            const userData = {
                email: email,
                name: email.split('@')[0],
                loginTime: new Date().toISOString()
            };
            
            localStorage.setItem('careersafe_user', JSON.stringify(userData));
            
            // Initialize stats if not exists
            if (!localStorage.getItem('careersafe_stats')) {
                localStorage.setItem('careersafe_stats', JSON.stringify({
                    analyses: 0,
                    scams: 0,
                    companies: 0,
                    resumes: 0
                }));
            }
            
            // Show success notification
            if (window.showNotification) {
                window.showNotification('Login successful! Redirecting...', 'success');
            }
            
            // Redirect to dashboard
            setTimeout(() => {
                window.location.href = 'dashboard.html';
            }, 500);
        }
        
        // Hide loader when page is ready
        window.addEventListener('load', () => {
            const loader = document.getElementById('pageLoader');
            if (loader) {
                setTimeout(() => {
                    loader.classList.add('hidden');
                    setTimeout(() => loader.remove(), 300);
                }, 100);
            }
        });
    </script>
</body>

</html>
